<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="refresh" content="2">
	</head>

	<body>
		<canvas id="myCanvas" width="800" height="800"></canvas>

		<script>
			// Define canvas
			var canvas = document.getElementById("myCanvas")
			var context = canvas.getContext("2d")

			// Fill background
			context.beginPath();
			context.rect(0, 0, canvas.width, canvas.height);
			context.fillStyle = "#999";
			context.fill();

			// Node class
			function node(iteration, x, y, radius, direction, spread, 
			red, green, blue) {

				// Random number wrapper
				this.jitter = function(v) {

					return (-v + 2 * v * Math.random())
				}

				// Branch current node
				this.branch = function() {

					console.log(iteration, x, y)

					context.beginPath();
					context.arc(
							x,
							y,
							10,
							(green == 255 ? 1 : 0) * Math.PI,
							(green == 255 ? 2 : 1) * Math.PI,
							false)

					context.fillStyle = "rgb(" + red + ", " + green + ", " + blue + ")"
					context.fill()

					if (iteration > 0)
						for (i = -1; i <= 1; i += 2) {

							x2 = Math.round(
									x + 2 * radius * Math.cos(direction + spread * i))

								y2 = Math.round(
										y + 2 * radius * Math.sin(direction + spread * i))

								node(

									iteration - 1,
									x2,
									y2,
									radius,
									direction,
									spread,
									(i == -1 ? 255 : 0),
									(i == 1 ? 255 : 0),
									0
								)
						}
				}

				// Branch itself
				this.branch()
			}

			// Create left branch
			node(

				// Iterations
				3,

				// X
				canvas.width / 2,

				// Y
				canvas.height / 2,

				// Radius
				20,

				// Direction
				Math.PI,

				// Spread
				Math.PI / 8,

				// Colour
				255,
				255,
				255
			)
		</script>
	</body>
</html>
