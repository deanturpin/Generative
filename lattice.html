<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="refresh" content="2">
	</head>

	<body>
		<canvas id="myCanvas" width="800" height="800"></canvas>

		<script>
			// Define canvas
			var canvas = document.getElementById("myCanvas")
			var context = canvas.getContext("2d")

			// Fill background
			context.beginPath();
			context.rect(0, 0, canvas.width, canvas.height);
			context.fillStyle = "#999";
			context.fill();

			// Node class
			function node(iteration, x, y, radius, direction, spread, 
			red, green, blue) {

				// Random number wrapper
				this.jitter = function(v) {

					return (-v + 2 * v * Math.random())
				}

				// Branch current node
				this.branch = function() {

					// Radians in a circle
					const radians = 2 * Math.PI / 360

					// console.log(x, y, direction, spread, radius)

					context.beginPath();
					context.arc(
							x,
							y,
							10,
							(green == 255 ? 1 : 0) * Math.PI,
							(green == 255 ? 2 : 1) * Math.PI,
							false)

					context.fillStyle = "rgb(" + red + ", " + green + ", " + blue + ")"
					context.fill()

					var x2 = Math.round(
						x + 2 * radius * Math.cos(radians * (direction - spread)))

					var y2 = Math.round(
						y + 2 * radius * Math.sin(radians * (direction - spread)))

					if (iteration > 0)
						node(

							iteration - 1,
							x2,
							y2,
							radius,
							direction,
							spread, //  / 2,
							255, // Math.round(red * .9),
							0,
							0
						)

					var x2 = Math.round(
						x + 2 * radius * Math.cos(radians * (direction + spread)))

					var y2 = Math.round(
						y + 2 * radius * Math.sin(radians * (direction + spread)))

					if (iteration > 0)
						node(

							iteration - 1,
							x2 - 10 * Math.random(),
							y2 - 10 * Math.random(),
							radius,
							direction,
							spread, // / 2,
							0,
							255, // Math.round(green * .9),
							0
						)
				}

				// Branch itself
				this.branch()
			}

			const iterations = 7

			// Create left branch
			node(

				// Iterations
				iterations,

				// X
				canvas.width / 2,

				// Y
				canvas.height / 2,

				// Radius
				20,

				// Direction
				180,

				// Spread
				45,

				// Colour
				255,
				255,
				255
			)

			// Create right branch
			/*
			node(

				// Iterations
				iterations,

				// X
				canvas.width / 2,

				// Y
				canvas.height / 2,

				// Radius
				20,

				// Direction
				0,

				// Spread
				45,

				// Colour
				255,
				255,
				255
			)
			*/
		</script>
	</body>
</html>
