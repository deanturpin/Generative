<!DOCTYPE HTML>
<html>
	<head>
		<title>Tributary</title>
		<meta http-equiv="refresh" content="2">
		<style>
			body { background-color: white }
		</style>
	</head>

	<body>
		<canvas id="myCanvas" width="800" height="800"></canvas>

		<script>
			var canvas = document.getElementById("myCanvas")
			var context = canvas.getContext("2d")

			function node(x, y, length, width, direction, colour) {

				// Branch current node
				this.branch = function() {

					// Radians in a circle
					const r = 2 * Math.PI / 360

					// End point
					const x2 = x + length * Math.cos(direction * r)
					const y2 = y + length * Math.sin(direction * r)

					// Render stroke
					context.beginPath()
					context.moveTo(x, y)
					context.lineTo(x2, y2)
					context.lineWidth = width
					context.strokeStyle = "rgb(" + colour + ", " + colour + ", 0)"
					context.stroke()

					// Return node starting at current end point
					return new node(
						x2,
						y2,
						length - 10 + 20 * Math.random(),
						width * 1.3,
						direction -20 + 40 * Math.random(),
						colour + 40
					)
				}
			}

			// First node
			n = new node(

				// X
				400,

				// Y
				0,

				// Length
				60,

				// Width
				1,

				// Branch angle
				90,

				// Colour
				0
			)

			for (i = 0; i < 10; ++i)
				n = n.branch()
		</script>
	</body>
</html>
